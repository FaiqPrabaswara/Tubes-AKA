<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Analisis Binary Search</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }
    button {
      padding: 10px 16px;
      margin-top: 10px;
      cursor: pointer;
    }
    canvas {
      margin-top: 30px;
    }
  </style>
</head>
<body>

<h2>Analisis Running Time Binary Search</h2>

<p>
Aplikasi ini membandingkan Binary Search Iteratif dan Rekursif
berdasarkan waktu eksekusi rata-rata pada dataset besar.
</p>

<button onclick="runExperiment()">Jalankan Pengujian</button>

<canvas id="chart"></canvas>

<script>
function binarySearchIterative(arr, target) {
  let left = 0, right = arr.length - 1;
  while (left <= right) {
    let mid = Math.floor((left + right) / 2);
    if (arr[mid] === target) return mid;
    if (arr[mid] < target) left = mid + 1;
    else right = mid - 1;
  }
  return -1;
}

function binarySearchRecursive(arr, target, left, right) {
  if (left > right) return -1;
  let mid = Math.floor((left + right) / 2);
  if (arr[mid] === target) return mid;
  if (arr[mid] < target)
    return binarySearchRecursive(arr, target, mid + 1, right);
  return binarySearchRecursive(arr, target, left, mid - 1);
}

function measureTime(fn, arr, target, repeat = 10000) {
  let start = performance.now();
  for (let i = 0; i < repeat; i++) {
    fn(arr, target);
  }
  let end = performance.now();
  return (end - start) / repeat;
}

function runExperiment() {
  const sizes = [1000, 10000, 100000, 1000000];
  const iterativeTimes = [];
  const recursiveTimes = [];

  sizes.forEach(n => {
    const data = Array.from({ length: n }, (_, i) => i);
    const target = Math.floor(n / 2);

    iterativeTimes.push(
      measureTime(binarySearchIterative, data, target)
    );

    recursiveTimes.push(
      measureTime(
        (arr, t) => binarySearchRecursive(arr, t, 0, arr.length - 1),
        data,
        target
      )
    );
  });

  drawChart(sizes, iterativeTimes, recursiveTimes);
}

function drawChart(labels, iterative, recursive) {
  const ctx = document.getElementById('chart');
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'Binary Search Iteratif',
          data: iterative,
          borderWidth: 2
        },
        {
          label: 'Binary Search Rekursif',
          data: recursive,
          borderWidth: 2
        }
      ]
    },
    options: {
      scales: {
        x: {
          title: {
            display: true,
            text: 'Ukuran Dataset (n)'
          }
        },
        y: {
          title: {
            display: true,
            text: 'Waktu Eksekusi Rata-rata (ms)'
          }
        }
      }
    }
  });
}
</script>

</body>
</html>
